"use strict";var t,e,n,r,i,o="\n";exports.ListType=void 0,(t=exports.ListType||(exports.ListType={})).Ordered="ordered",t.Bullet="bullet",t.Checked="checked",t.Unchecked="unchecked",exports.ScriptType=void 0,(e=exports.ScriptType||(exports.ScriptType={})).Sub="sub",e.Super="super",exports.DirectionType=void 0,(exports.DirectionType||(exports.DirectionType={})).Rtl="rtl",exports.AlignType=void 0,(n=exports.AlignType||(exports.AlignType={})).Left="left",n.Center="center",n.Right="right",n.Justify="justify",exports.DataType=void 0,(r=exports.DataType||(exports.DataType={})).Image="image",r.Video="video",r.Formula="formula",r.Text="text",exports.GroupType=void 0,(i=exports.GroupType||(exports.GroupType={})).Block="block",i.InlineGroup="inline-group",i.List="list",i.Video="video",i.Table="table";var s=function(t,e){this.type=t,this.value=e},a=function(t,e){this.type=t,this.value=e},u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p={exports:{}};!function(t,e){var n="__lodash_hash_undefined__",r=1,i=2,o=9007199254740991,s="[object Arguments]",a="[object Array]",c="[object AsyncFunction]",p="[object Boolean]",l="[object Date]",f="[object Error]",h="[object Function]",d="[object GeneratorFunction]",y="[object Map]",g="[object Number]",m="[object Null]",b="[object Object]",v="[object Promise]",T="[object Proxy]",k="[object RegExp]",_="[object Set]",C="[object String]",A="[object Symbol]",x="[object Undefined]",w="[object WeakMap]",L="[object ArrayBuffer]",B="[object DataView]",S=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[s]=I[a]=I[L]=I[p]=I[B]=I[l]=I[f]=I[h]=I[y]=I[g]=I[b]=I[k]=I[_]=I[C]=I[w]=!1;var O="object"==typeof u&&u&&u.Object===Object&&u,z="object"==typeof self&&self&&self.Object===Object&&self,V=O||z||Function("return this")(),H=e&&!e.nodeType&&e,D=H&&t&&!t.nodeType&&t,R=D&&D.exports===H,P=R&&O.process,E=function(){try{return P&&P.binding&&P.binding("util")}catch(t){}}(),G=E&&E.isTypedArray;function F(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function W(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function N(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var U,$,q,M=Array.prototype,J=Function.prototype,Z=Object.prototype,Q=V["__core-js_shared__"],K=J.toString,X=Z.hasOwnProperty,Y=(U=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",tt=Z.toString,et=RegExp("^"+K.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=R?V.Buffer:void 0,rt=V.Symbol,it=V.Uint8Array,ot=Z.propertyIsEnumerable,st=M.splice,at=rt?rt.toStringTag:void 0,ut=Object.getOwnPropertySymbols,ct=nt?nt.isBuffer:void 0,pt=($=Object.keys,q=Object,function(t){return $(q(t))}),lt=Et(V,"DataView"),ft=Et(V,"Map"),ht=Et(V,"Promise"),dt=Et(V,"Set"),yt=Et(V,"WeakMap"),gt=Et(Object,"create"),mt=Nt(lt),bt=Nt(ft),vt=Nt(ht),Tt=Nt(dt),kt=Nt(yt),_t=rt?rt.prototype:void 0,Ct=_t?_t.valueOf:void 0;function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wt;++e<n;)this.add(t[e])}function Bt(t){var e=this.__data__=new xt(t);this.size=e.size}function St(t,e){var n=qt(t),r=!n&&$t(t),i=!n&&!r&&Mt(t),o=!n&&!r&&!i&&Xt(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=a.length;for(var c in t)!e&&!X.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Wt(c,u))||a.push(c);return a}function jt(t,e){for(var n=t.length;n--;)if(Ut(t[n][0],e))return n;return-1}function It(t){return null==t?void 0===t?x:m:at&&at in Object(t)?function(t){var e=X.call(t,at),n=t[at];try{t[at]=void 0;var r=!0}catch(t){}var i=tt.call(t);r&&(e?t[at]=n:delete t[at]);return i}(t):function(t){return tt.call(t)}(t)}function Ot(t){return Kt(t)&&It(t)==s}function zt(t,e,n,o,u){return t===e||(null==t||null==e||!Kt(t)&&!Kt(e)?t!=t&&e!=e:function(t,e,n,o,u,c){var h=qt(t),d=qt(e),m=h?a:Ft(t),v=d?a:Ft(e),T=(m=m==s?b:m)==b,x=(v=v==s?b:v)==b,w=m==v;if(w&&Mt(t)){if(!Mt(e))return!1;h=!0,T=!1}if(w&&!T)return c||(c=new Bt),h||Xt(t)?Dt(t,e,n,o,u,c):function(t,e,n,o,s,a,u){switch(n){case B:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!a(new it(t),new it(e)));case p:case l:case g:return Ut(+t,+e);case f:return t.name==e.name&&t.message==e.message;case k:case C:return t==e+"";case y:var c=W;case _:var h=o&r;if(c||(c=N),t.size!=e.size&&!h)return!1;var d=u.get(t);if(d)return d==e;o|=i,u.set(t,e);var m=Dt(c(t),c(e),o,s,a,u);return u.delete(t),m;case A:if(Ct)return Ct.call(t)==Ct.call(e)}return!1}(t,e,m,n,o,u,c);if(!(n&r)){var S=T&&X.call(t,"__wrapped__"),j=x&&X.call(e,"__wrapped__");if(S||j){var I=S?t.value():t,O=j?e.value():e;return c||(c=new Bt),u(I,O,n,o,c)}}if(!w)return!1;return c||(c=new Bt),function(t,e,n,i,o,s){var a=n&r,u=Rt(t),c=u.length,p=Rt(e),l=p.length;if(c!=l&&!a)return!1;var f=c;for(;f--;){var h=u[f];if(!(a?h in e:X.call(e,h)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var y=!0;s.set(t,e),s.set(e,t);var g=a;for(;++f<c;){var m=t[h=u[f]],b=e[h];if(i)var v=a?i(b,m,h,e,t,s):i(m,b,h,t,e,s);if(!(void 0===v?m===b||o(m,b,n,i,s):v)){y=!1;break}g||(g="constructor"==h)}if(y&&!g){var T=t.constructor,k=e.constructor;T==k||!("constructor"in t)||!("constructor"in e)||"function"==typeof T&&T instanceof T&&"function"==typeof k&&k instanceof k||(y=!1)}return s.delete(t),s.delete(e),y}(t,e,n,o,u,c)}(t,e,n,o,zt,u))}function Vt(t){return!(!Qt(t)||function(t){return!!Y&&Y in t}(t))&&(Jt(t)?et:S).test(Nt(t))}function Ht(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||Z,e!==r)return pt(t);var e,n,r,i=[];for(var o in Object(t))X.call(t,o)&&"constructor"!=o&&i.push(o);return i}function Dt(t,e,n,o,s,a){var u=n&r,c=t.length,p=e.length;if(c!=p&&!(u&&p>c))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,h=!0,d=n&i?new Lt:void 0;for(a.set(t,e),a.set(e,t);++f<c;){var y=t[f],g=e[f];if(o)var m=u?o(g,y,f,e,t,a):o(y,g,f,t,e,a);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!F(e,(function(t,e){if(r=e,!d.has(r)&&(y===t||s(y,t,n,o,a)))return d.push(e);var r}))){h=!1;break}}else if(y!==g&&!s(y,g,n,o,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Rt(t){return function(t,e,n){var r=e(t);return qt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Yt,Gt)}function Pt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Et(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Vt(n)?n:void 0}At.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},At.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},At.prototype.get=function(t){var e=this.__data__;if(gt){var r=e[t];return r===n?void 0:r}return X.call(e,t)?e[t]:void 0},At.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:X.call(e,t)},At.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=gt&&void 0===e?n:e,this},xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(t){var e=this.__data__,n=jt(e,t);return!(n<0)&&(n==e.length-1?e.pop():st.call(e,n,1),--this.size,!0)},xt.prototype.get=function(t){var e=this.__data__,n=jt(e,t);return n<0?void 0:e[n][1]},xt.prototype.has=function(t){return jt(this.__data__,t)>-1},xt.prototype.set=function(t,e){var n=this.__data__,r=jt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wt.prototype.clear=function(){this.size=0,this.__data__={hash:new At,map:new(ft||xt),string:new At}},wt.prototype.delete=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e},wt.prototype.get=function(t){return Pt(this,t).get(t)},wt.prototype.has=function(t){return Pt(this,t).has(t)},wt.prototype.set=function(t,e){var n=Pt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Lt.prototype.add=Lt.prototype.push=function(t){return this.__data__.set(t,n),this},Lt.prototype.has=function(t){return this.__data__.has(t)},Bt.prototype.clear=function(){this.__data__=new xt,this.size=0},Bt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Bt.prototype.get=function(t){return this.__data__.get(t)},Bt.prototype.has=function(t){return this.__data__.has(t)},Bt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof xt){var r=n.__data__;if(!ft||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wt(r)}return n.set(t,e),this.size=n.size,this};var Gt=ut?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(ut(t),(function(e){return ot.call(t,e)})))}:function(){return[]},Ft=It;function Wt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function Nt(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ut(t,e){return t===e||t!=t&&e!=e}(lt&&Ft(new lt(new ArrayBuffer(1)))!=B||ft&&Ft(new ft)!=y||ht&&Ft(ht.resolve())!=v||dt&&Ft(new dt)!=_||yt&&Ft(new yt)!=w)&&(Ft=function(t){var e=It(t),n=e==b?t.constructor:void 0,r=n?Nt(n):"";if(r)switch(r){case mt:return B;case bt:return y;case vt:return v;case Tt:return _;case kt:return w}return e});var $t=Ot(function(){return arguments}())?Ot:function(t){return Kt(t)&&X.call(t,"callee")&&!ot.call(t,"callee")},qt=Array.isArray;var Mt=ct||function(){return!1};function Jt(t){if(!Qt(t))return!1;var e=It(t);return e==h||e==d||e==c||e==T}function Zt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function Qt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Kt(t){return null!=t&&"object"==typeof t}var Xt=G?function(t){return function(e){return t(e)}}(G):function(t){return Kt(t)&&Zt(t.length)&&!!I[It(t)]};function Yt(t){return null!=(e=t)&&Zt(e.length)&&!Jt(e)?St(t):Ht(t);var e}t.exports=function(t,e){return zt(t,e)}}(p,p.exports);var l,f=c(p.exports),h=function(){function t(t,e){"string"==typeof t&&(t=new s(exports.DataType.Text,t+"")),this.insert=t,this.attributes=e||{}}return t.createNewLineOp=function(){return new t(o)},t.prototype.isContainerBlock=function(){return this.isBlockquote()||this.isList()||this.isTable()||this.isCodeBlock()||this.isHeader()||this.isBlockAttribute()||this.isCustomTextBlock()},t.prototype.isBlockAttribute=function(){var t=this.attributes;return!!(t.align||t.direction||t.indent)},t.prototype.isBlockquote=function(){return!!this.attributes.blockquote},t.prototype.isHeader=function(){return!!this.attributes.header},t.prototype.isTable=function(){return!!this.attributes.table},t.prototype.isSameHeaderAs=function(t){return t.attributes.header===this.attributes.header&&this.isHeader()},t.prototype.hasSameAdiAs=function(t){return this.attributes.align===t.attributes.align&&this.attributes.direction===t.attributes.direction&&this.attributes.indent===t.attributes.indent},t.prototype.hasSameIndentationAs=function(t){return this.attributes.indent===t.attributes.indent},t.prototype.hasSameAttr=function(t){return f(this.attributes,t.attributes)},t.prototype.hasHigherIndentThan=function(t){return(Number(this.attributes.indent)||0)>(Number(t.attributes.indent)||0)},t.prototype.isInline=function(){return!(this.isContainerBlock()||this.isVideo()||this.isCustomEmbedBlock())},t.prototype.isCodeBlock=function(){return!!this.attributes["code-block"]},t.prototype.hasSameLangAs=function(t){return this.attributes["code-block"]===t.attributes["code-block"]},t.prototype.isJustNewline=function(){return this.insert.value===o},t.prototype.isList=function(){return this.isOrderedList()||this.isBulletList()||this.isCheckedList()||this.isUncheckedList()},t.prototype.isOrderedList=function(){return this.attributes.list===exports.ListType.Ordered},t.prototype.isBulletList=function(){return this.attributes.list===exports.ListType.Bullet},t.prototype.isCheckedList=function(){return this.attributes.list===exports.ListType.Checked},t.prototype.isUncheckedList=function(){return this.attributes.list===exports.ListType.Unchecked},t.prototype.isACheckList=function(){return this.attributes.list==exports.ListType.Unchecked||this.attributes.list===exports.ListType.Checked},t.prototype.isSameListAs=function(t){return!!t.attributes.list&&(this.attributes.list===t.attributes.list||t.isACheckList()&&this.isACheckList())},t.prototype.isSameTableRowAs=function(t){return!!t.isTable()&&this.isTable()&&this.attributes.table===t.attributes.table},t.prototype.isText=function(){return this.insert.type===exports.DataType.Text},t.prototype.isImage=function(){return this.insert.type===exports.DataType.Image},t.prototype.isFormula=function(){return this.insert.type===exports.DataType.Formula},t.prototype.isVideo=function(){return this.insert.type===exports.DataType.Video},t.prototype.isLink=function(){return this.isText()&&!!this.attributes.link},t.prototype.isCustomEmbed=function(){return this.insert instanceof a},t.prototype.isCustomEmbedBlock=function(){return this.isCustomEmbed()&&!!this.attributes.renderAsBlock},t.prototype.isCustomTextBlock=function(){return this.isText()&&!!this.attributes.renderAsBlock},t.prototype.isMentions=function(){return this.isText()&&!!this.attributes.mentions},t}(),d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},d(t,e)};function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(t,e){if(void 0===e&&(e=void 0),!t)return"";var n="";e&&(n=[].concat(e).map((function(t){return t.key+(t.value?'="'+t.value+'"':"")})).join(" "));var r=">";return"img"!==t&&"br"!==t||(r="/>"),n?"<"+t+" "+n+r:"<"+t+r}function b(t){return void 0===t&&(t=""),t&&"</"+t+">"||""}function v(t,e){return void 0===e&&(e=!0),e&&(t=function(t){return T(l.Html).reduce(_,t)}(t)),T(l.Html).reduce(k,t)}function T(t){var e=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#x27;"],["\\/","&#x2F;"],["\\(","&#40;"],["\\)","&#41;"]];return t===l.Html?e.filter((function(t){var e=t[0];return t[1],-1===e.indexOf("(")&&-1===e.indexOf(")")})):e.filter((function(t){var e=t[0];return t[1],-1===e.indexOf("/")}))}function k(t,e){return t.replace(new RegExp(e[0],"g"),e[1])}function _(t,e){return t.replace(new RegExp(e[1],"g"),e[0].replace("\\",""))}"function"==typeof SuppressedError&&SuppressedError,function(t){t[t.Html=0]="Html",t[t.Url=1]="Url"}(l||(l={}));var C=function(){function t(){}return t.sanitize=function(t,e){var n=function(){};e&&"function"==typeof e.urlSanitizer&&(n=e.urlSanitizer);var r,i=n(t);return"string"==typeof i?i:function(t){var e=T(l.Url),n=e.reduce(_,t);return e.reduce(k,n)}((r=(r=t).replace(/^\s*/gm,""),/^((https?|s?ftp|file|blob|mailto|tel):|#|\/|data:image\/)/.test(r)?r:"unsafe:"+r))},t}(),A=function(){function t(){}return t.sanitize=function(e,n){var r={};return e&&"object"==typeof e?(e.class&&t.IsValidClass(e.class)&&(r.class=e.class),e.id&&t.IsValidId(e.id)&&(r.id=e.id),t.IsValidTarget(e.target+"")&&(r.target=e.target),e.avatar&&(r.avatar=C.sanitize(e.avatar+"",n)),e["end-point"]&&(r["end-point"]=C.sanitize(e["end-point"]+"",n)),e.slug&&(r.slug=e.slug+""),r):r},t.IsValidClass=function(t){return!!t.match(/^[a-zA-Z0-9_\-]{1,500}$/i)},t.IsValidId=function(t){return!!t.match(/^[a-zA-Z0-9_\-\:\.]{1,500}$/i)},t.IsValidTarget=function(t){return["_self","_blank","_parent","_top"].indexOf(t)>-1},t}();function x(t){return 0===t.length?null:t.length>=2?t[1]:t[0]}function w(t){return t.reduce((function(t,e){return t.concat(Array.isArray(e)?w(e):e)}),[])}function L(t,e){for(var n,r=[],i=0;i<t.length;i++)n=t[i],i>0&&e(n,t[i-1])?r[r.length-1].push(n):r.push([n]);return r.map((function(t){return 1===t.length?t[0]:t}))}function B(t,e,n){for(var r={elements:[],sliceStartsAt:-1},i=e;i>=0&&n(t[i]);i--)r.sliceStartsAt=i,r.elements.unshift(t[i]);return r}var S=function(){function t(){}return t.sanitize=function(e,n){var r={};if(!e||"object"!=typeof e)return r;var i=["bold","italic","underline","strike","code","blockquote","code-block","renderAsBlock"],o=["background","color"],s=e.font,a=e.size,u=e.link,c=e.script,p=e.list,l=e.header,f=e.align,h=e.direction,d=e.indent,y=e.mentions,m=e.mention,b=e.width,v=e.target,T=e.rel,k=e["code-block"],_=g(i,o,["font","size","link","script","list","header","align","direction","indent","mentions","mention","width","target","rel","code-block"]);if(i.forEach((function(t){var n=e[t];n&&(r[t]=!!n)})),o.forEach((function(n){var i=e[n];i&&(t.IsValidHexColor(i+"")||t.IsValidColorLiteral(i+"")||t.IsValidRGBColor(i+""))&&(r[n]=i)})),s&&t.IsValidFontName(s+"")&&(r.font=s),a&&t.IsValidSize(a+"")&&(r.size=a),b&&t.IsValidWidth(b+"")&&(r.width=b),u&&(r.link=C.sanitize(u+"",n)),v&&t.isValidTarget(v)&&(r.target=v),T&&t.IsValidRel(T)&&(r.rel=T),k&&(t.IsValidLang(k)?r["code-block"]=k:r["code-block"]=!!k),c!==exports.ScriptType.Sub&&exports.ScriptType.Super!==c||(r.script=c),p!==exports.ListType.Bullet&&p!==exports.ListType.Ordered&&p!==exports.ListType.Checked&&p!==exports.ListType.Unchecked||(r.list=p),Number(l)&&(r.header=Math.min(Number(l),6)),function(t,e){if(Array.prototype.find)return Array.prototype.find.call(t,e);for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}([exports.AlignType.Center,exports.AlignType.Right,exports.AlignType.Justify,exports.AlignType.Left],(function(t){return t===f}))&&(r.align=f),h===exports.DirectionType.Rtl&&(r.direction=h),d&&Number(d)&&(r.indent=Math.min(Number(d),30)),y&&m){var x=A.sanitize(m,n);Object.keys(x).length>0&&(r.mentions=!!y,r.mention=m)}return Object.keys(e).reduce((function(t,n){return-1===_.indexOf(n)&&(t[n]=e[n]),t}),r)},t.IsValidHexColor=function(t){return!!t.match(/^#([0-9A-F]{6}|[0-9A-F]{3})$/i)},t.IsValidColorLiteral=function(t){return!!t.match(/^[a-z]{1,50}$/i)},t.IsValidRGBColor=function(t){return!!t.match(/^rgb\(((0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d),\s*){2}(0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d)\)$/i)},t.IsValidFontName=function(t){return!!t.match(/^[a-z\s0-9\- ]{1,30}$/i)},t.IsValidSize=function(t){return!!t.match(/^[a-z0-9\-]{1,20}$/i)},t.IsValidWidth=function(t){return!!t.match(/^[0-9]*(px|em|%)?$/)},t.isValidTarget=function(t){return!!t.match(/^[_a-zA-Z0-9\-]{1,50}$/)},t.IsValidRel=function(t){return!!t.match(/^[a-zA-Z\s\-]{1,250}$/i)},t.IsValidLang=function(t){return"boolean"==typeof t||!!t.match(/^[a-zA-Z\s\-\\\/\+]{1,50}$/i)},t}();function j(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=0;i<e.length;i++){var o=e[i];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])}return r}var I=function(){function t(){}return t.denormalize=function(t){if(!t||"object"!=typeof t)return[];if("object"==typeof t.insert||t.insert===o)return[t];var e=function(t){var e="\n";if(t===e)return[t];var n=t.split(e);if(1===n.length)return n;var r=n.length-1;return n.reduce((function(t,n,i){return i!==r?""!==n?t=t.concat(n,e):t.push(e):""!==n&&t.push(n),t}),[])}(t.insert+"");if(1===e.length)return[t];var n=j({},t,{insert:o});return e.map((function(e){return e===o?n:j({},t,{insert:e})}))},t}(),O=function(){function t(){}return t.convert=function(e,n){if(!Array.isArray(e))return[];for(var r,i,o=[],s=0,a=[].concat.apply([],e.map(I.denormalize));s<a.length;s++){var u=a[s];u.insert&&((r=t.convertInsertVal(u.insert,n))&&(i=S.sanitize(u.attributes,n),o.push(new h(r,i))))}return o},t.convertInsertVal=function(t,e){if("string"==typeof t)return new s(exports.DataType.Text,t);if(!t||"object"!=typeof t)return null;var n=Object.keys(t);return n.length?exports.DataType.Image in t?new s(exports.DataType.Image,C.sanitize(t[exports.DataType.Image]+"",e)):exports.DataType.Video in t?new s(exports.DataType.Video,C.sanitize(t[exports.DataType.Video]+"",e)):exports.DataType.Formula in t?new s(exports.DataType.Formula,t[exports.DataType.Formula]):new a(n[0],t[n[0]]):null},t}(),z={serif:"font-family: Georgia, Times New Roman, serif",monospace:"font-family: Monaco, Courier New, monospace"},V={font:function(t){return z[t]||"font-family:"+t},size:{small:"font-size: 0.75em",large:"font-size: 1.5em",huge:"font-size: 2.5em"},indent:function(t,e){var n=3*parseInt(t,10);return"padding-"+("rtl"===e.attributes.direction?"right":"left")+":"+n+"em"},direction:function(t,e){return"rtl"===t?"direction:rtl"+(e.attributes.align?"":"; text-align:inherit"):void 0}},H=function(){function t(t,e){this.op=t,this.options=j({},{classPrefix:"ql",inlineStyles:void 0,encodeHtml:!0,listItemTag:"li",paragraphTag:"p"},e)}return t.prototype.prefixClass=function(t){return this.options.classPrefix?this.options.classPrefix+"-"+t:t+""},t.prototype.getHtml=function(){var t=this.getHtmlParts();return t.openingTag+t.content+t.closingTag},t.prototype.getHtmlParts=function(){var t=this;if(this.op.isJustNewline()&&!this.op.isContainerBlock())return{openingTag:"",closingTag:"",content:o};var e=this.getTags(),n=this.getTagAttributes();!e.length&&n.length&&e.push("span");for(var r=[],i=[],s=function(e){return"img"===e&&!!t.op.attributes.link},a=0,u=e;a<u.length;a++){var c=u[a];s(c)&&r.push(m("a",this.getLinkAttrs())),r.push(m(c,n)),i.push("img"===c?"":b(c)),s(c)&&i.push(b("a")),n=[]}return i.reverse(),{openingTag:r.join(""),content:this.getContent(),closingTag:i.join("")}},t.prototype.getContent=function(){if(this.op.isContainerBlock())return"";if(this.op.isMentions())return this.op.insert.value;var t=this.op.isFormula()||this.op.isText()?this.op.insert.value:"";return this.options.encodeHtml&&v(t)||t},t.prototype.getCssClasses=function(){var t=this.op.attributes;if(this.options.inlineStyles)return[];var e=["indent","align","direction","font","size"];return this.options.allowBackgroundClasses&&e.push("background"),(this.getCustomCssClasses()||[]).concat(e.filter((function(e){return!!t[e]})).filter((function(e){return"background"!==e||S.IsValidColorLiteral(t[e])})).map((function(e){return e+"-"+t[e]})).concat(this.op.isFormula()?"formula":[]).concat(this.op.isVideo()?"video":[]).concat(this.op.isImage()?"image":[]).map(this.prefixClass.bind(this)))},t.prototype.getCssStyles=function(){var t=this,e=this.op.attributes,n=[["color"]];return!this.options.inlineStyles&&this.options.allowBackgroundClasses||n.push(["background","background-color"]),this.options.inlineStyles&&(n=n.concat([["indent"],["align","text-align"],["direction"],["font","font-family"],["size"]])),(this.getCustomCssStyles()||[]).concat(n.filter((function(t){return!!e[t[0]]})).map((function(n){var r=n[0],i=e[r],o=t.options.inlineStyles&&t.options.inlineStyles[r]||V[r];return"object"==typeof o?o[i]:"function"==typeof o?o(i,t.op):x(n)+":"+i}))).filter((function(t){return void 0!==t}))},t.prototype.getTagAttributes=function(){if(this.op.attributes.code&&!this.op.isLink())return[];var t=this.makeAttr.bind(this),e=this.getCustomTagAttributes(),n=e?Object.keys(this.getCustomTagAttributes()).map((function(n){return t(n,e[n])})):[],r=this.getCssClasses(),i=r.length?n.concat([t("class",r.join(" "))]):n;if(this.op.isImage())return this.op.attributes.width&&(i=i.concat(t("width",this.op.attributes.width))),i.concat(t("src",this.op.insert.value));if(this.op.isACheckList())return i.concat(t("data-checked",this.op.isCheckedList()?"true":"false"));if(this.op.isFormula())return i;if(this.op.isVideo())return i.concat(t("frameborder","0"),t("allowfullscreen","true"),t("src",this.op.insert.value));if(this.op.isMentions()){var o=this.op.attributes.mention;return o.class&&(i=i.concat(t("class",o.class))),i=o["end-point"]&&o.slug?i.concat(t("href",o["end-point"]+"/"+o.slug)):i.concat(t("href","about:blank")),o.target&&(i=i.concat(t("target",o.target))),i}var s=this.getCssStyles();return s.length&&i.push(t("style",s.join(";"))),this.op.isCodeBlock()&&"string"==typeof this.op.attributes["code-block"]?i.concat(t("data-language",this.op.attributes["code-block"])):(this.op.isContainerBlock()||this.op.isLink()&&(i=i.concat(this.getLinkAttrs())),i)},t.prototype.makeAttr=function(t,e){return{key:t,value:e}},t.prototype.getLinkAttrs=function(){var t=S.isValidTarget(this.options.linkTarget||"")?this.options.linkTarget:void 0,e=S.IsValidRel(this.options.linkRel||"")?this.options.linkRel:void 0,n=this.op.attributes.target||t,r=this.op.attributes.rel||e;return[].concat(this.makeAttr("href",this.op.attributes.link)).concat(n?this.makeAttr("target",n):[]).concat(r?this.makeAttr("rel",r):[])},t.prototype.getCustomTag=function(t){if(this.options.customTag&&"function"==typeof this.options.customTag)return this.options.customTag.apply(null,[t,this.op])},t.prototype.getCustomTagAttributes=function(){if(this.options.customTagAttributes&&"function"==typeof this.options.customTagAttributes)return this.options.customTagAttributes.apply(null,[this.op])},t.prototype.getCustomCssClasses=function(){if(this.options.customCssClasses&&"function"==typeof this.options.customCssClasses){var t=this.options.customCssClasses.apply(null,[this.op]);if(t)return Array.isArray(t)?t:[t]}},t.prototype.getCustomCssStyles=function(){if(this.options.customCssStyles&&"function"==typeof this.options.customCssStyles){var t=this.options.customCssStyles.apply(null,[this.op]);if(t)return Array.isArray(t)?t:[t]}},t.prototype.getTags=function(){var t=this,e=this.op.attributes;if(!this.op.isText())return[this.op.isVideo()?"iframe":this.op.isImage()?"img":"span"];for(var n=this.options.paragraphTag||"p",r=0,i=[["blockquote"],["code-block","pre"],["list",this.options.listItemTag],["header"],["align",n],["direction",n],["indent",n]];r<i.length;r++){var o,s=i[r],a=s[0];if(e[a])return(o=this.getCustomTag(a))?[o]:"header"===a?["h"+e[a]]:[x(s)]}if(this.op.isCustomTextBlock())return(o=this.getCustomTag("renderAsBlock"))?[o]:[n];var u=Object.keys(e).reduce((function(e,n){var r=t.getCustomTag(n);return r&&(e[n]=r),e}),{}),c=[["link","a"],["mentions","a"],["script"],["bold","strong"],["italic","em"],["strike","s"],["underline","u"],["code"]];return g(c.filter((function(t){return!!e[t[0]]})),Object.keys(u).filter((function(t){return!c.some((function(e){return e[0]==t}))})).map((function(t){return[t,u[t]]}))).map((function(t){return u[t[0]]?u[t[0]]:"script"===t[0]?e[t[0]]===exports.ScriptType.Sub?"sub":"sup":x(t)}))},t}(),D=function(t){this.ops=t},R=function(t){this.op=t},P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e}(R),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e}(R),G=function(t,e){this.op=t,this.ops=e},F=function(t){this.items=t},W=function(t,e){void 0===e&&(e=null),this.item=t,this.innerList=e},N=function(t){this.rows=t},U=function(t){this.cells=t},$=function(t){this.item=t},q=function(){function t(){}return t.pairOpsWithTheirBlock=function(t){for(var e,n=[],r=function(t){return!(t.isJustNewline()||t.isCustomEmbedBlock()||t.isVideo()||t.isContainerBlock())},i=function(t){return t.isInline()},o=t.length-1;o>=0;o--){var s=t[o];s.isVideo()?n.push(new P(s)):s.isCustomEmbedBlock()?n.push(new E(s)):s.isContainerBlock()?(e=B(t,o-1,r),n.push(new G(s,e.elements)),o=e.sliceStartsAt>-1?e.sliceStartsAt:o):(e=B(t,o-1,i),n.push(new D(e.elements.concat(s))),o=e.sliceStartsAt>-1?e.sliceStartsAt:o)}return n.reverse(),n},t.groupConsecutiveSameStyleBlocks=function(e,n){return void 0===n&&(n={header:!0,codeBlocks:!0,blockquotes:!0,customBlocks:!0}),L(e,(function(e,r){return e instanceof G&&r instanceof G&&(n.codeBlocks&&t.areBothCodeblocksWithSameLang(e,r)||n.blockquotes&&t.areBothBlockquotesWithSameAdi(e,r)||n.header&&t.areBothSameHeadersWithSameAdi(e,r)||n.customBlocks&&t.areBothCustomBlockWithSameAttr(e,r))}))},t.reduceConsecutiveSameStyleBlocksToOne=function(t){var e=h.createNewLineOp();return t.map((function(t){if(!Array.isArray(t))return t instanceof G&&!t.ops.length&&t.ops.push(e),t;var n=t.length-1;return t[0].ops=w(t.map((function(t,r){return t.ops.length?t.ops.concat(r<n?[e]:[]):[e]}))),t[0]}))},t.areBothCodeblocksWithSameLang=function(t,e){return t.op.isCodeBlock()&&e.op.isCodeBlock()&&t.op.hasSameLangAs(e.op)},t.areBothSameHeadersWithSameAdi=function(t,e){return t.op.isSameHeaderAs(e.op)&&t.op.hasSameAdiAs(e.op)},t.areBothBlockquotesWithSameAdi=function(t,e){return t.op.isBlockquote()&&e.op.isBlockquote()&&t.op.hasSameAdiAs(e.op)},t.areBothCustomBlockWithSameAttr=function(t,e){return t.op.isCustomTextBlock()&&e.op.isCustomTextBlock()&&t.op.hasSameAttr(e.op)},t}(),M=function(){function t(){}return t.prototype.nest=function(t){var e=this,n=this.convertListBlocksToListGroups(t);return L(w(this.groupConsecutiveListGroups(n).map((function(t){return Array.isArray(t)?e.nestListSection(t):t}))),(function(t,e){return t instanceof F&&e instanceof F&&t.items[0].item.op.isSameListAs(e.items[0].item.op)})).map((function(t){if(!Array.isArray(t))return t;var e=t.map((function(t){return t.items}));return new F(w(e))}))},t.prototype.convertListBlocksToListGroups=function(t){return L(t,(function(t,e){return t instanceof G&&e instanceof G&&t.op.isList()&&e.op.isList()&&t.op.isSameListAs(e.op)&&t.op.hasSameIndentationAs(e.op)})).map((function(t){return Array.isArray(t)?new F(t.map((function(t){return new W(t)}))):t instanceof G&&t.op.isList()?new F([new W(t)]):t}))},t.prototype.groupConsecutiveListGroups=function(t){return L(t,(function(t,e){return t instanceof F&&e instanceof F}))},t.prototype.nestListSection=function(t){var e=this,n=this.groupByIndent(t);return Object.keys(n).map(Number).sort().reverse().forEach((function(r){n[r].forEach((function(n){var r=t.indexOf(n);e.placeUnderParent(n,t.slice(0,r))&&t.splice(r,1)}))})),t},t.prototype.groupByIndent=function(t){return t.reduce((function(t,e){var n=e.items[0].item.op.attributes.indent;return n&&(t[n]=t[n]||[],t[n].push(e)),t}),{})},t.prototype.placeUnderParent=function(t,e){for(var n=e.length-1;n>=0;n--){var r=e[n];if(t.items[0].item.op.hasHigherIndentThan(r.items[0].item.op)){var i=r.items[r.items.length-1];return i.innerList?i.innerList.items=i.innerList.items.concat(t.items):i.innerList=t,!0}}return!1},t}(),J=function(){function t(){}return t.prototype.group=function(t){return this.convertTableBlocksToTableGroups(t)},t.prototype.convertTableBlocksToTableGroups=function(t){var e=this;return L(t,(function(t,e){return t instanceof G&&e instanceof G&&t.op.isTable()&&e.op.isTable()})).map((function(t){return Array.isArray(t)?new N(e.convertTableBlocksToTableRows(t)):t instanceof G&&t.op.isTable()?new N([new U([new $(t)])]):t}))},t.prototype.convertTableBlocksToTableRows=function(t){return L(t,(function(t,e){return t instanceof G&&e instanceof G&&t.op.isTable()&&e.op.isTable()&&t.op.isSameTableRowAs(e.op)})).map((function(t){return new U(Array.isArray(t)?t.map((function(t){return new $(t)})):[new $(t)])}))},t}(),Z="<br/>",Q=function(){function t(t,e){var n;this.rawDeltaOps=[],this.callbacks={},this.options=j({paragraphTag:"p",encodeHtml:!0,classPrefix:"ql",inlineStyles:!1,multiLineBlockquote:!0,multiLineHeader:!0,multiLineCodeblock:!0,multiLineParagraph:!0,multiLineCustomBlock:!0,allowBackgroundClasses:!1,linkTarget:"_blank"},e,{orderedListTag:"ol",bulletListTag:"ul",listItemTag:"li"}),n=this.options.inlineStyles?"object"==typeof this.options.inlineStyles?this.options.inlineStyles:{}:void 0,this.converterOptions={encodeHtml:this.options.encodeHtml,classPrefix:this.options.classPrefix,inlineStyles:n,listItemTag:this.options.listItemTag,paragraphTag:this.options.paragraphTag,linkRel:this.options.linkRel,linkTarget:this.options.linkTarget,allowBackgroundClasses:this.options.allowBackgroundClasses,customTag:this.options.customTag,customTagAttributes:this.options.customTagAttributes,customCssClasses:this.options.customCssClasses,customCssStyles:this.options.customCssStyles},this.rawDeltaOps=t}return t.prototype._getListTag=function(t){return t.isOrderedList()?this.options.orderedListTag+"":t.isBulletList()||t.isCheckedList()||t.isUncheckedList()?this.options.bulletListTag+"":""},t.prototype.getGroupedOps=function(){var t=O.convert(this.rawDeltaOps,this.options),e=q.pairOpsWithTheirBlock(t),n=q.groupConsecutiveSameStyleBlocks(e,{blockquotes:!!this.options.multiLineBlockquote,header:!!this.options.multiLineHeader,codeBlocks:!!this.options.multiLineCodeblock,customBlocks:!!this.options.multiLineCustomBlock}),r=q.reduceConsecutiveSameStyleBlocksToOne(n);return r=(new J).group(r),(new M).nest(r)},t.prototype.convert=function(){var t=this;return this.getGroupedOps().map((function(e){if(e instanceof F)return t._renderWithCallbacks(exports.GroupType.List,e,(function(){return t._renderList(e)}));if(e instanceof N)return t._renderWithCallbacks(exports.GroupType.Table,e,(function(){return t._renderTable(e)}));if(e instanceof G){var n=e;return t._renderWithCallbacks(exports.GroupType.Block,e,(function(){return t._renderBlock(n.op,n.ops)}))}return e instanceof E?t._renderCustom(e.op,null):e instanceof P?t._renderWithCallbacks(exports.GroupType.Video,e,(function(){return new H(e.op,t.converterOptions).getHtml()})):t._renderWithCallbacks(exports.GroupType.InlineGroup,e,(function(){return t._renderInlines(e.ops,!0)}))})).join("")},t.prototype._renderWithCallbacks=function(t,e,n){var r="",i=this.callbacks.beforeRender_cb;(r="function"==typeof i?i.apply(null,[t,e]):"")||(r=n());var o=this.callbacks.afterRender_cb;return r="function"==typeof o?o.apply(null,[t,r]):r},t.prototype._renderList=function(t){var e=this,n=t.items[0];return m(this._getListTag(n.item.op))+t.items.map((function(t){return e._renderListItem(t)})).join("")+b(this._getListTag(n.item.op))},t.prototype._renderListItem=function(t){t.item.op.attributes.indent=0;var e=new H(t.item.op,this.converterOptions).getHtmlParts(),n=this._renderInlines(t.item.ops,!1);return e.openingTag+n+(t.innerList?this._renderList(t.innerList):"")+e.closingTag},t.prototype._renderTable=function(t){var e=this;return m("table")+m("tbody")+t.rows.map((function(t){return e._renderTableRow(t)})).join("")+b("tbody")+b("table")},t.prototype._renderTableRow=function(t){var e=this;return m("tr")+t.cells.map((function(t){return e._renderTableCell(t)})).join("")+b("tr")},t.prototype._renderTableCell=function(t){var e=new H(t.item.op,this.converterOptions).getHtmlParts(),n=this._renderInlines(t.item.ops,!1);return m("td",{key:"data-row",value:t.item.op.attributes.table})+e.openingTag+n+e.closingTag+b("td")},t.prototype._renderBlock=function(t,e){var n=this,r=new H(t,this.converterOptions).getHtmlParts();if(t.isCodeBlock())return r.openingTag+v(e.map((function(e){return e.isCustomEmbed()?n._renderCustom(e,t):e.insert.value})).join(""))+r.closingTag;var i=e.map((function(e){return n._renderInline(e,t)})).join("");return r.openingTag+(i||Z)+r.closingTag},t.prototype._renderInlines=function(t,e){var n=this;void 0===e&&(e=!0);var r=t.length-1,i=t.map((function(t,e){return e>0&&e===r&&t.isJustNewline()?"":n._renderInline(t,null)})).join("");if(!e)return i;var o=m(this.options.paragraphTag),s=b(this.options.paragraphTag);return i===Z||this.options.multiLineParagraph?o+i+s:o+i.split(Z).map((function(t){return""===t?Z:t})).join(s+o)+s},t.prototype._renderInline=function(t,e){return t.isCustomEmbed()?this._renderCustom(t,e):new H(t,this.converterOptions).getHtml().replace(/\n/g,Z)},t.prototype._renderCustom=function(t,e){var n=this.callbacks.renderCustomOp_cb;return"function"==typeof n?n.apply(null,[t,e]):""},t.prototype.beforeRender=function(t){"function"==typeof t&&(this.callbacks.beforeRender_cb=t)},t.prototype.afterRender=function(t){"function"==typeof t&&(this.callbacks.afterRender_cb=t)},t.prototype.renderCustomWith=function(t){this.callbacks.renderCustomOp_cb=t},t}();exports.BlockGroup=G,exports.BlotBlock=E,exports.DeltaInsertOp=h,exports.InlineGroup=D,exports.InsertDataCustom=a,exports.InsertDataQuill=s,exports.ListGroup=F,exports.ListItem=W,exports.NewLine=o,exports.OpToHtmlConverter=H,exports.QuillDeltaToHtmlConverter=Q,exports.VideoItem=P;
